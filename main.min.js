const clientId="someclientid",
clientSecret="someclientsecret",
url="https://api.foursquare.com/v2/venues/explore?near=",

access_key="your acces key",
forecastUrl="https://api.weatherstack.com/forecast?access_key=your access key&query=",

$input=$("#city"),$submit=$("#button"),$destination=$("#destination"),$container=$(".container"),
$venueDivs=[$("#venue1"),$("#venue2"),$("#venue3"),$("#venue4"),$("#venue5"),$("#venue6")],
$weatherDivs=[$("#weather1"),$("#weather2"),$("#weather3"),$("#weather4"),$("#weather5"),$("#weather6")],
weekDays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],
$weather=$("#weather"),

getVenues=async()=>{
    const e=$input.val(),
    t=`${url}${e}&limit=10&client_id=${clientId}&client_secret=${clientSecret}&v=20180101`;
    try{const e=await fetch(t);
        if(e.ok){const t=await e.json();
            console.log(t);
            return t.response.groups[0].items.map(e=>e.venue)
                }
        }catch(error){
            console.log(error)
        }
    },
    /*getForecast function returns the preferred weather forecast data based on the 
    parameter forecast_days. See https://weatherstack.com/documentation "Weather Forecast
    for other parameters"*/
    getForecast=async()=>{
        const e=`${forecastUrl}${access_key}&query=${$input.val()}&forecast_days=6&hourly=1&interval=24&units=m`;
        try{
            const t=await fetch(e);
            if(t.ok){
                const e=await t.json();
                console.log(e);
                 foreCastDays = e.forecast;
                return foreCastDays;
                    }
        }catch(error){
           console.log(error)
        }
    },

    
    renderVenues=e=>{
        $venueDivs.forEach((t,a)=>{
            const n=e[a],
            r=n.categories[0].icon,
            c=`${r.prefix}bg_64${r.suffix}`;
            
            let s=createVenueHTML(n.name,n.location,c);
            t.append(s)}),
            $destination.append(`<h2>${e[0].location.city}</h2>`)
        },
        
        renderForecast=e=>{
            $weatherDivs.forEach(($item,index)=>{  
                const n=e[index];
                let r=createWeatherHTML(n);
                $item.append(r);})
        },
        
        executeSearch=()=>(
            $venueDivs.forEach(e=>e.empty()
            ),
            $weatherDivs.forEach(e=>e.empty()
            ),
            
            $destination.empty(),
            $container.css("visibility","visible"),
            
            getVenues().then(e=>renderVenues(e)
            ),
            
            getForecast().then(e=>renderForecast(e)),!1);
            
            $submit.click(executeSearch);